<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>IOT결합 자동 디스펜서</title>
    <link rel="stylesheet" href="./styleSource.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyAUVSpDLXhU8Xu47q9KMoXlI8f8ozWtKNo",
        authDomain: "cus-be8f0.firebaseapp.com",
        databaseURL: "https://cus-be8f0-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "cus-be8f0",
        storageBucket: "cus-be8f0.firebasestorage.app",
        messagingSenderId: "322803967928",
        appId: "1:322803967928:web:f6130455c7ddb49e4d114d",
        measurementId: "G-H3K3ZHKDV7"
      };
      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();
    </script>
  </head>

  <body>
    <header>IOT결합 자동 디스펜서</header>
    <div class="after"></div>
  
    <div class="container-flex">
      <!-- 왼쪽: 카드 탭 -->
      <div class="card-panel">
        <div class="card-tab">
          <h3>소스 목록</h3>
          <div id="sourceCards" class="card-scroll-area"></div>
        </div>
      </div>
  
      <!-- 오른쪽: textarea와 버튼 -->
      <div class="textarea-panel">
        <textarea placeholder="메모 또는 정보 입력..." class="info-textarea"></textarea>
      </div>
    </div>
  
    <script>
      const sourceRef = database.ref('/');
  
      sourceRef.on('value', (snapshot) => {
        const data = snapshot.val();
        const container = document.getElementById('sourceCards');
        container.innerHTML = '';
  
        for (const key in data) {
          const item = data[key];
          const card = document.createElement('div');
          card.className = 'source-card';
          card.innerHTML = `
            <p><strong>UID:</strong> ${key}</p>
            <p><strong>무게:</strong> ${item.weight || 0} g</p>
          `;
          container.appendChild(card);
        }
      });
    </script>
  </body>
</html>